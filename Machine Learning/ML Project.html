<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Human Activity Recognition</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>Human Activity Recognition</h1>

<h2>Summary</h2>

<p>Using devices such as Jawbone Up, Nike FuelBand, and Fitbit it is now possible to collect a large amount of data about personal activity relatively inexpensively. These type of devices are part of the quantified self movement - a group of enthusiasts who take measurements about themselves regularly to improve their health, to find patterns in their behavior, or because they are tech geeks. One thing that people regularly do is quantify how much of a particular activity they do, but they rarely quantify how well they do it. </p>

<p>The goal of this project is to predict the manner in which they did the exercise. The data was collected from accelerometers on the belt, forearm, arm, and dumbell of 6 participants. They were asked to perform barbell lifts correctly and incorrectly in 5 different ways. </p>

<p>The data for this project come from this source: <a href="http://groupware.les.inf.puc-rio.br/har">http://groupware.les.inf.puc-rio.br/har</a>. (see the section on the Weight Lifting Exercise Dataset). </p>

<h2>Exploratory analysis</h2>

<p>The data consists of </p>

<p>a) a training set of 19622 observations with 160 variables</p>

<pre><code>  https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv
</code></pre>

<p>b) a testing set of 20 observations with 160 variables</p>

<pre><code>  https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv
</code></pre>

<p>The outcome we want to predict is the variable &ldquo;classe&rdquo;, with possible values A/B/C/D/E. Please refer to the summary in Output 1.2 and 1.3</p>

<p>Please refer to Output 1.4 for the structure of the training data. All the data has been initially loaded as characters but most of the variables in the training data set are numeric in nature. Also a lot of variables are sparsely populated - see some examples in Output 1.5</p>

<h2>Models</h2>

<p>Predictive models were created as listed below. Please refer to Output 2.1 for the relevant r code.</p>

<ol>
<li><p>The following variables are not directly related to the accelerometer readings. They were not included in the model.</p>

<p>user_name</p>

<p>cvtd_timestamp</p>

<p>classe</p>

<p>X</p>

<p>raw_timestamp_part_1</p>

<p>raw_timestamp_part_2</p>

<p>new_window</p></li>
<li><p>From the remaining variables, all the sparsely populated variables (that have less than 50% of data) were also excluded from the model.</p></li>
<li><p>The training data was split into true training (15%) and cross-validation data sets (85%)</p></li>
<li><p>The following two methods were applied to the true training data set</p>

<p>a) random forests </p>

<p>b) gradient boosing</p></li>
<li><p>The two models were then used to predict the outcomes of the observations in the cross-validation data set as well as the testing data set.</p></li>
<li><p>The accuracy was measured by comparing the predicted values with the actual values in the cross-validation data set.</p></li>
<li><p>These steps were repeted a few times to get the average out of sample error Output 2.2</p></li>
</ol>

<h2>Conclusions &amp; Out of sample error</h2>

<p>The accuracy and out of sample error for the two models considered were</p>

<p>Random forests      - Accuracy = 97.6% ; Out of sample error = 2.4%</p>

<p>Gradient boosing    - Accuracy = 96.7% ; Out of sample error = 3.3%</p>

<p>The prediction accuracy of the 20 test observations was 100%</p>

<h2>Appendix</h2>

<h1></h1>

<h3>Output 1.1 - Load the libraries and files</h3>

<pre><code class="r"># load the libraries
library(caret)
</code></pre>

<pre><code>## Loading required package: lattice
## Loading required package: ggplot2
</code></pre>

<pre><code class="r">library(randomForest)
</code></pre>

<pre><code>## randomForest 4.6-7
## Type rfNews() to see new features/changes/bug fixes.
</code></pre>

<pre><code class="r">library(gbm)
</code></pre>

<pre><code>## Loading required package: survival
## Loading required package: splines
## 
## Attaching package: &#39;survival&#39;
## 
## The following object is masked from &#39;package:caret&#39;:
## 
##     cluster
## 
## Loading required package: parallel
## Loaded gbm 2.1
</code></pre>

<pre><code class="r">library(survival)
library(splines)
library(plyr)

# set training sample percentage
trSamplePct = 0.15

set.seed(233)

# load training and test data files

training = read.csv(&quot;http://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv&quot;, 
    colClasses = &quot;character&quot;)
testing = read.csv(&quot;http://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv&quot;, 
    colClasses = &quot;character&quot;)
</code></pre>

<h3>Output 1.2 - Summary of the variable &ldquo;classe&rdquo;</h3>

<pre><code class="r">summary(as.factor(training$classe))
</code></pre>

<pre><code>##    A    B    C    D    E 
## 5580 3797 3422 3216 3607
</code></pre>

<h3>Output 1.3 - Barplot of the variable &ldquo;classe&rdquo;</h3>

<pre><code class="r">barplot(summary(as.factor(training$classe)))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-3"/> </p>

<h3>Output 1.4 - Structure of the training data set</h3>

<pre><code class="r">str(training)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    19622 obs. of  160 variables:
##  $ X                       : chr  &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ user_name               : chr  &quot;carlitos&quot; &quot;carlitos&quot; &quot;carlitos&quot; &quot;carlitos&quot; ...
##  $ raw_timestamp_part_1    : chr  &quot;1323084231&quot; &quot;1323084231&quot; &quot;1323084231&quot; &quot;1323084232&quot; ...
##  $ raw_timestamp_part_2    : chr  &quot;788290&quot; &quot;808298&quot; &quot;820366&quot; &quot;120339&quot; ...
##  $ cvtd_timestamp          : chr  &quot;05/12/2011 11:23&quot; &quot;05/12/2011 11:23&quot; &quot;05/12/2011 11:23&quot; &quot;05/12/2011 11:23&quot; ...
##  $ new_window              : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ num_window              : chr  &quot;11&quot; &quot;11&quot; &quot;11&quot; &quot;12&quot; ...
##  $ roll_belt               : chr  &quot;1.41&quot; &quot;1.41&quot; &quot;1.42&quot; &quot;1.48&quot; ...
##  $ pitch_belt              : chr  &quot;8.07&quot; &quot;8.07&quot; &quot;8.07&quot; &quot;8.05&quot; ...
##  $ yaw_belt                : chr  &quot;-94.4&quot; &quot;-94.4&quot; &quot;-94.4&quot; &quot;-94.4&quot; ...
##  $ total_accel_belt        : chr  &quot;3&quot; &quot;3&quot; &quot;3&quot; &quot;3&quot; ...
##  $ kurtosis_roll_belt      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_picth_belt     : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_yaw_belt       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_roll_belt      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_roll_belt.1    : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_yaw_belt       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ max_roll_belt           : chr  NA NA NA NA ...
##  $ max_picth_belt          : chr  NA NA NA NA ...
##  $ max_yaw_belt            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ min_roll_belt           : chr  NA NA NA NA ...
##  $ min_pitch_belt          : chr  NA NA NA NA ...
##  $ min_yaw_belt            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ amplitude_roll_belt     : chr  NA NA NA NA ...
##  $ amplitude_pitch_belt    : chr  NA NA NA NA ...
##  $ amplitude_yaw_belt      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ var_total_accel_belt    : chr  NA NA NA NA ...
##  $ avg_roll_belt           : chr  NA NA NA NA ...
##  $ stddev_roll_belt        : chr  NA NA NA NA ...
##  $ var_roll_belt           : chr  NA NA NA NA ...
##  $ avg_pitch_belt          : chr  NA NA NA NA ...
##  $ stddev_pitch_belt       : chr  NA NA NA NA ...
##  $ var_pitch_belt          : chr  NA NA NA NA ...
##  $ avg_yaw_belt            : chr  NA NA NA NA ...
##  $ stddev_yaw_belt         : chr  NA NA NA NA ...
##  $ var_yaw_belt            : chr  NA NA NA NA ...
##  $ gyros_belt_x            : chr  &quot;0&quot; &quot;0.02&quot; &quot;0&quot; &quot;0.02&quot; ...
##  $ gyros_belt_y            : chr  &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;0&quot; ...
##  $ gyros_belt_z            : chr  &quot;-0.02&quot; &quot;-0.02&quot; &quot;-0.02&quot; &quot;-0.03&quot; ...
##  $ accel_belt_x            : chr  &quot;-21&quot; &quot;-22&quot; &quot;-20&quot; &quot;-22&quot; ...
##  $ accel_belt_y            : chr  &quot;4&quot; &quot;4&quot; &quot;5&quot; &quot;3&quot; ...
##  $ accel_belt_z            : chr  &quot;22&quot; &quot;22&quot; &quot;23&quot; &quot;21&quot; ...
##  $ magnet_belt_x           : chr  &quot;-3&quot; &quot;-7&quot; &quot;-2&quot; &quot;-6&quot; ...
##  $ magnet_belt_y           : chr  &quot;599&quot; &quot;608&quot; &quot;600&quot; &quot;604&quot; ...
##  $ magnet_belt_z           : chr  &quot;-313&quot; &quot;-311&quot; &quot;-305&quot; &quot;-310&quot; ...
##  $ roll_arm                : chr  &quot;-128&quot; &quot;-128&quot; &quot;-128&quot; &quot;-128&quot; ...
##  $ pitch_arm               : chr  &quot;22.5&quot; &quot;22.5&quot; &quot;22.5&quot; &quot;22.1&quot; ...
##  $ yaw_arm                 : chr  &quot;-161&quot; &quot;-161&quot; &quot;-161&quot; &quot;-161&quot; ...
##  $ total_accel_arm         : chr  &quot;34&quot; &quot;34&quot; &quot;34&quot; &quot;34&quot; ...
##  $ var_accel_arm           : chr  NA NA NA NA ...
##  $ avg_roll_arm            : chr  NA NA NA NA ...
##  $ stddev_roll_arm         : chr  NA NA NA NA ...
##  $ var_roll_arm            : chr  NA NA NA NA ...
##  $ avg_pitch_arm           : chr  NA NA NA NA ...
##  $ stddev_pitch_arm        : chr  NA NA NA NA ...
##  $ var_pitch_arm           : chr  NA NA NA NA ...
##  $ avg_yaw_arm             : chr  NA NA NA NA ...
##  $ stddev_yaw_arm          : chr  NA NA NA NA ...
##  $ var_yaw_arm             : chr  NA NA NA NA ...
##  $ gyros_arm_x             : chr  &quot;0&quot; &quot;0.02&quot; &quot;0.02&quot; &quot;0.02&quot; ...
##  $ gyros_arm_y             : chr  &quot;0&quot; &quot;-0.02&quot; &quot;-0.02&quot; &quot;-0.03&quot; ...
##  $ gyros_arm_z             : chr  &quot;-0.02&quot; &quot;-0.02&quot; &quot;-0.02&quot; &quot;0.02&quot; ...
##  $ accel_arm_x             : chr  &quot;-288&quot; &quot;-290&quot; &quot;-289&quot; &quot;-289&quot; ...
##  $ accel_arm_y             : chr  &quot;109&quot; &quot;110&quot; &quot;110&quot; &quot;111&quot; ...
##  $ accel_arm_z             : chr  &quot;-123&quot; &quot;-125&quot; &quot;-126&quot; &quot;-123&quot; ...
##  $ magnet_arm_x            : chr  &quot;-368&quot; &quot;-369&quot; &quot;-368&quot; &quot;-372&quot; ...
##  $ magnet_arm_y            : chr  &quot;337&quot; &quot;337&quot; &quot;344&quot; &quot;344&quot; ...
##  $ magnet_arm_z            : chr  &quot;516&quot; &quot;513&quot; &quot;513&quot; &quot;512&quot; ...
##  $ kurtosis_roll_arm       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_picth_arm      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_yaw_arm        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_roll_arm       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_pitch_arm      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_yaw_arm        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ max_roll_arm            : chr  NA NA NA NA ...
##  $ max_picth_arm           : chr  NA NA NA NA ...
##  $ max_yaw_arm             : chr  NA NA NA NA ...
##  $ min_roll_arm            : chr  NA NA NA NA ...
##  $ min_pitch_arm           : chr  NA NA NA NA ...
##  $ min_yaw_arm             : chr  NA NA NA NA ...
##  $ amplitude_roll_arm      : chr  NA NA NA NA ...
##  $ amplitude_pitch_arm     : chr  NA NA NA NA ...
##  $ amplitude_yaw_arm       : chr  NA NA NA NA ...
##  $ roll_dumbbell           : chr  &quot;13.05217456&quot; &quot;13.13073959&quot; &quot;12.85074981&quot; &quot;13.43119971&quot; ...
##  $ pitch_dumbbell          : chr  &quot;-70.49400371&quot; &quot;-70.63750507&quot; &quot;-70.27811982&quot; &quot;-70.39379464&quot; ...
##  $ yaw_dumbbell            : chr  &quot;-84.87393888&quot; &quot;-84.71064711&quot; &quot;-85.14078134&quot; &quot;-84.87362553&quot; ...
##  $ kurtosis_roll_dumbbell  : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_picth_dumbbell : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ kurtosis_yaw_dumbbell   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_roll_dumbbell  : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_pitch_dumbbell : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ skewness_yaw_dumbbell   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ max_roll_dumbbell       : chr  NA NA NA NA ...
##  $ max_picth_dumbbell      : chr  NA NA NA NA ...
##  $ max_yaw_dumbbell        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ min_roll_dumbbell       : chr  NA NA NA NA ...
##  $ min_pitch_dumbbell      : chr  NA NA NA NA ...
##  $ min_yaw_dumbbell        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ amplitude_roll_dumbbell : chr  NA NA NA NA ...
##   [list output truncated]
</code></pre>

<h3>Output 1.5 - Examples of sparsely populated variables in the training data set</h3>

<pre><code class="r">summary(suppressWarnings(as.numeric(training$kurtosis_roll_belt)))
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##      -2      -1      -1       0       0      33   19226
</code></pre>

<pre><code class="r">
summary(suppressWarnings(as.numeric(training$skewness_roll_belt)))
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##      -6       0       0       0       0       4   19225
</code></pre>

<h3>Output 2.1 - Models</h3>

<pre><code class="r"># this function cleans up the training and testing data sets and prepares
# them for model fitting
cleanupData = function(df) {

    # create a temp copy of df
    dfTmp = df

    # remove all the variables that are not going to be used in the model
    dfTmp$user_name = NULL
    dfTmp$cvtd_timestamp = NULL
    dfTmp$classe = NULL
    dfTmp$X = NULL
    dfTmp$raw_timestamp_part_1 = NULL
    dfTmp$raw_timestamp_part_2 = NULL
    dfTmp$new_window = NULL


    # convert all the variables with numerical data to numeric data types use
    # suppressWarnings () to avoid the warning &#39;NAs introduced by coercion&#39;
    dfTmp[sapply(dfTmp, is.character)] = suppressWarnings(lapply(dfTmp[sapply(dfTmp, 
        is.character)], as.numeric))

    # combine all the variables to form a clean dataframe and return
    dfClean = cbind(classe = as.factor(df$classe), dfTmp)

    return(dfClean)
}

# add missing variable classe to testing data set
testing$classe = &quot;E&quot;

# cleanup the training and testing data sets
trainingClean = cleanupData(training)

testingClean = cleanupData(testing)
# remove the extra columns in testing
testingClean$problem_id = NULL

# Remove all columns that have less than a threshold percentage of data
thresh = 0.5

for (i in colnames(trainingClean)) {

    if (sum(!is.na(trainingClean[i]))/nrow(trainingClean) &lt; thresh) {
        trainingClean[i] = NULL

        # remove the same from testing data as well
        testingClean[i] = NULL
    }
}

# create separate training and cross-validation data sets from the training
# data
inTrain = createDataPartition(trainingClean$classe, p = trSamplePct)[[1]]
trTrain = trainingClean[inTrain, ]
trTest = trainingClean[-inTrain, ]

set.seed(62433)

## Model - 1 fit a model with random forest using the train data
modRf = train(trTrain$classe ~ ., method = &quot;rf&quot;, data = trTrain)

# predict using the cross-validation data created from training data
pRf = predict(modRf, newdata = trTest)

# predict using the test data
pRfTest = predict(modRf, newdata = testingClean)

## Model - 2 fit a model with gbm using the train data
modGbm = train(trTrain$classe ~ ., method = &quot;gbm&quot;, data = trTrain, verbose = FALSE)

# predict using the cross-validation data created from training data
pGbm = predict(modGbm, newdata = trTest)

# predict using the test data
pGbmTest = predict(modGbm, newdata = testingClean)

</code></pre>

<h3>Output 2.2 - Accuracy and Out of sample error</h3>

<pre><code class="r">
# check the accuracy of the model on the cross-validation data
accuracyRf = (confusionMatrix(pRf, trTest$classe))$overall[1]

# check the accuracy of the model on the cross-validation data
accuracyGbm = (confusionMatrix(pGbm, trTest$classe))$overall[1]

# Out of sample error
print(paste0(&quot;Random forests - Out of sample error (%) = &quot;, round((1 - accuracyRf) * 
    100, 1)))
</code></pre>

<pre><code>## [1] &quot;Random forests - Out of sample error (%) = 2.4&quot;
</code></pre>

<pre><code class="r">
print(paste0(&quot;Gradient Boosting - Out of sample error (%) = &quot;, round((1 - accuracyGbm) * 
    100, 1)))
</code></pre>

<pre><code>## [1] &quot;Gradient Boosting - Out of sample error (%) = 3.3&quot;
</code></pre>

</body>

</html>

